{% extends "base.html" %}
{% block main_title %} {{ title }} {% endblock %}
{% block content %}


<h3>NOVĚ PŘIDANÉ UDÁLOSTI</h3>
<br>
<!-- Načtení Bootstrapu pouze pro tuto sekci -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div id="newestCarousel" class="carousel slide" data-bs-ride="carousel" style="max-width: 600px; margin: auto;">
    <div class="carousel-inner">
        {% for event in newest_events %}
        {% if event.image %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <a href="/detail/{{ event.pk }}">
                <img src="{{ event.image.url }}" class="d-block w-100" alt="{{ event.title }}" style="height: 300px; object-fit: cover;">
            </a>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#newestCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#newestCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<br><br>
<h3>NADCHÁZEJÍCÍ UDÁLOSTI</h3>
<br>

<div id="upcomingCarousel" class="carousel slide" data-bs-ride="carousel" style="max-width: 600px; margin: auto;">
    <div class="carousel-inner">
        {% for event in nearest_events %}
        {% if event.image %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <a href="/detail/{{ event.pk }}">
                <img src="{{ event.image.url }}" class="d-block w-100" alt="{{ event.title }}" style="height: 300px; object-fit: cover;">
            </a>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#upcomingCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#upcomingCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Načtení Bootstrapu JS pouze pro tuto část -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<br><br>

<script>
    // První carousel (vlastní script)
    let currentNewestSlide = 0;
    const newestSlides = document.querySelectorAll('#newestCarouselItems .carousel-item');

    function changeSlide(carouselName, direction) {
        if (carouselName === 'newest') {
            newestSlides[currentNewestSlide].classList.remove('active');
            currentNewestSlide = (currentNewestSlide + direction + newestSlides.length) % newestSlides.length;
            newestSlides[currentNewestSlide].classList.add('active');
        }
    }

    setInterval(() => {
        changeSlide('newest', 1);
    }, 2500); // Mění obrázek každých 2,5 sekund pro první carousel
</script>

<h3>NEJNOVĚJŠÍ KOMENTÁŘE</h3>
{% for comment in newest_comments %}
<p>Komentář k události {{ comment.event.name }}: {{ comment.comment_date }} - {{ comment.comment }}
    <a href="/detail/{{comment.event.pk}}" class="button">Podívat se na událost</a></p>
{% endfor %}
<br>



{% endblock %}

